<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Swiper 풀페이지 (80% 비율 조건)</title>
        <!-- Swiper CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    </head>
    <body>
        <style>
            html,
            body {
                margin: 0;
                height: 100%;
                overflow: hidden; /* 기본 스크롤 막기 */
            }
            .section {
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 3rem;
            }
            .section:nth-child(odd) {
                background: #4f6793;
                color: white;
            }
            .section:nth-child(even) {
                background: #ddd;
            }
        </style>

        <div class="section">Section 1</div>
        <div class="section">Section 2</div>
        <div class="section">Section 3</div>
        <div class="section">Section 4</div>

        <script>
            const sections = document.querySelectorAll(".section");
            let current = 0;
            let isScrolling = false;

            function goToSection(index) {
                if (index < 0 || index >= sections.length) return;
                isScrolling = true;
                current = index;
                window.scrollTo({
                    top: sections[index].offsetTop,
                    behavior: "smooth",
                });
                setTimeout(() => (isScrolling = false), 700); // 스크롤 중 잠금 시간
            }

            window.addEventListener(
                "wheel",
                (e) => {
                    if (isScrolling) return;
                    if (e.deltaY > 0) {
                        goToSection(current + 1);
                    } else {
                        goToSection(current - 1);
                    }
                },
                { passive: false }
            );

            // 터치 스와이프 대응
            let touchStartY = 0;
            window.addEventListener("touchstart", (e) => {
                touchStartY = e.touches[0].clientY;
            });

            window.addEventListener("touchend", (e) => {
                const touchEndY = e.changedTouches[0].clientY;
                if (isScrolling) return;
                if (touchStartY - touchEndY > 50) {
                    goToSection(current + 1);
                } else if (touchEndY - touchStartY > 50) {
                    goToSection(current - 1);
                }
            });
        </script>
    </body>
</html>
